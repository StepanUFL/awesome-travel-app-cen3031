{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin</title>
  <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body class="admin-page">
  <div style="position:fixed; top:10px; right:10px; font-weight:600;">
    {% if current_username %}{{ current_username }}{% endif %}
  </div>

  <h1>All Users</h1>

  <table class="users-table">
    <thead>
      <tr>
        <th>User</th>
        <th>Past trips</th>
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
        <tr>
          <td style="width: 220px; white-space: nowrap;">{{ u.userName }}</td>
          <td>
            {% if u.trips %}
              <ul class="trip-list">
                {% for t in u.trips %}
                  <li>
                    {{ t.route_names|join:" -> " }}
                    <span class="muted">• {{ t.created_at|date:"Y-m-d H:i" }} • {{ t.distance_meters|floatformat:0 }} m</span>
                  </li>
                {% endfor %}
              </ul>
            {% else %}
              <span class="muted">No trips yet.</span>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <input type="button" value="Go to Main Page" onclick="location.href='{% url 'main' %}'">
</body>
</html>